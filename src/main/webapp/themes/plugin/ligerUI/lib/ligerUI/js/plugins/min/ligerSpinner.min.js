(function(e){e.fn.ligerSpinner=function(){return e.ligerui.run.call(this,"ligerSpinner",arguments)},e.fn.ligerGetSpinnerManager=function(){return e.ligerui.run.call(this,"ligerGetSpinnerManager",arguments)},e.ligerDefaults.Spinner={type:"float",isNegative:!0,decimalplace:2,step:.1,interval:50,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1},e.ligerMethos.Spinner={},e.ligerui.controls.Spinner=function(t,n){e.ligerui.controls.Spinner.base.constructor.call(this,t,n)},e.ligerui.controls.Spinner.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return e.ligerMethos.Spinner},_init:function(){e.ligerui.controls.Spinner.base._init.call(this);var t=this.options;t.type=="float"?(t.step=.1,t.interval=50):t.type=="int"?(t.step=1,t.interval=100):t.type=="time"&&(t.step=1,t.interval=100)},_render:function(){var t=this,n=this.options;t.interval=null,t.inputText=null,t.value=null,t.textFieldID="",this.element.tagName.toLowerCase()=="input"&&this.element.type&&this.element.type=="text"?(t.inputText=e(this.element),this.element.id&&(t.textFieldID=this.element.id)):(t.inputText=e('<input type="text"/>'),t.inputText.appendTo(e(this.element))),t.textFieldID==""&&n.textFieldID&&(t.textFieldID=n.textFieldID),t.link=e('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>'),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link).after(t.selectBox).after(t.valueField),t.link.up=e(".l-spinner-up",t.link),t.link.down=e(".l-spinner-down",t.link),t.inputText.addClass("l-text-field"),n.disabled&&t.wrapper.addClass("l-text-disabled"),t._isVerify(t.inputText.val())||(t.value=t._getDefaultValue(),t.inputText.val(t.value)),t.link.up.hover(function(){n.disabled||e(this).addClass("l-spinner-up-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-up-over")}).mousedown(function(){n.disabled||(t._uping.call(t),t.interval=setInterval(function(){t._uping.call(t)},n.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.link.down.hover(function(){n.disabled||e(this).addClass("l-spinner-down-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-down-over")}).mousedown(function(){n.disabled||(t.interval=setInterval(function(){t._downing.call(t)},n.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.inputText.change(function(){var e=t.inputText.val();t.value=t._getVerifyValue(e),t.trigger("changeValue",[t.value]),t.inputText.val(t.value)}).blur(function(){t.wrapper.removeClass("l-text-focus")}).focus(function(){t.wrapper.addClass("l-text-focus")}),t.wrapper.hover(function(){n.disabled||t.wrapper.addClass("l-text-over")},function(){t.wrapper.removeClass("l-text-over")}),t.set(n)},_setWidth:function(e){var t=this;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}))},_setHeight:function(e){var t=this;t.spinnerHeight!="auto"&&(e=t.spinnerHeight)},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},setValue:function(e){this.inputText.val(e)},getValue:function(){return this.inputText.val()},_round:function(e,t){var n=this,r=this.options,i=1;for(;t>0;i*=10,t--);for(;t<0;i/=10,t++);return Math.round(e*i)/i},_isInt:function(e){var t=this,n=this.options,r=n.isNegative?/^-?\d+$/:/^\d+$/;return r.test(e)?parseFloat(e)!=e?!1:!0:!1},_isFloat:function(e){var t=this,n=this.options,r=n.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/;return r.test(e)?parseFloat(e)!=e?!1:!0:!1},_isTime:function(e){var t=this,n=this.options,r=e.match(/^(\d{1,2}):(\d{1,2})$/);return r==null?!1:r[1]>24||r[2]>60?!1:!0},_isVerify:function(e){var t=this,n=this.options;if(n.type=="float"){if(!t._isFloat(e))return!1;var r=parseFloat(e);return n.minValue!=undefined&&n.minValue>r?!1:n.maxValue!=undefined&&n.maxValue<r?!1:!0}if(n.type=="int"){if(!t._isInt(e))return!1;var r=parseInt(e);return n.minValue!=undefined&&n.minValue>r?!1:n.maxValue!=undefined&&n.maxValue<r?!1:!0}return n.type=="time"?t._isTime(e):!1},_getVerifyValue:function(e){var t=this,n=this.options,r=null;return n.type=="float"?r=t._round(e,n.decimalplace):n.type=="int"?r=parseInt(e):n.type=="time"&&(r=e),t._isVerify(r)?r:t.value},_isOverValue:function(e){var t=this,n=this.options;return n.minValue!=null&&n.minValue>e?!0:n.maxValue!=null&&n.maxValue<e?!0:!1},_getDefaultValue:function(){var e=this,t=this.options;if(t.type=="float"||t.type=="int")return 0;if(t.type=="time")return"00:00"},_addValue:function(e){var t=this,n=this.options,r=t.inputText.val();r=parseFloat(r)+e;if(t._isOverValue(r))return;t.inputText.val(r),t.inputText.trigger("change")},_addTime:function(e){var t=this,n=this.options,r=t.inputText.val(),i=r.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(i[2])+e,newminute<10&&(newminute="0"+newminute),r=i[1]+":"+newminute;if(t._isOverValue(r))return;t.inputText.val(r),t.inputText.trigger("change")},_uping:function(){var e=this,t=this.options;t.type=="float"||t.type=="int"?e._addValue(t.step):t.type=="time"&&e._addTime(t.step)},_downing:function(){var e=this,t=this.options;t.type=="float"||t.type=="int"?e._addValue(-1*t.step):t.type=="time"&&e._addTime(-1*t.step)},_isDateTime:function(e){var t=this,n=this.options,r=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(r==null)return!1;var i=new Date(r[1],r[3]-1,r[4]);return i=="NaN"?!1:i.getFullYear()==r[1]&&i.getMonth()+1==r[3]&&i.getDate()==r[4]},_isLongDateTime:function(e){var t=this,n=this.options,r=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/,i=e.match(r);if(i==null)return!1;var s=new Date(i[1],i[3]-1,i[4],i[5],i[6]);return s=="NaN"?!1:s.getFullYear()==i[1]&&s.getMonth()+1==i[3]&&s.getDate()==i[4]&&s.getHours()==i[5]&&s.getMinutes()==i[6]}})})(jQuery)