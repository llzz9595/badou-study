(function(e){e.ligerMessageBox=function(t){return e.ligerui.run.call(null,"ligerMessageBox",arguments,{isStatic:!0})},e.ligerDefaults.MessageBox={isDrag:!0},e.ligerMethos.MessageBox={},e.ligerui.controls.MessageBox=function(t){e.ligerui.controls.MessageBox.base.constructor.call(this,null,t)},e.ligerui.controls.MessageBox.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"MessageBox"},__idPrev:function(){return"MessageBox"},_extendMethods:function(){return e.ligerMethos.MessageBox},_render:function(){var t=this,n=this.options,r="";r+='<div class="l-messagebox">',r+='        <div class="l-messagebox-lt"></div><div class="l-messagebox-rt"></div>',r+='        <div class="l-messagebox-l"></div><div class="l-messagebox-r"></div> ',r+='        <div class="l-messagebox-image"></div>',r+='        <div class="l-messagebox-title">',r+='            <div class="l-messagebox-title-inner"></div>',r+='            <div class="l-messagebox-close"></div>',r+="        </div>",r+='        <div class="l-messagebox-content">',r+="        </div>",r+='        <div class="l-messagebox-buttons"><div class="l-messagebox-buttons-inner">',r+="        </div></div>",r+="    </div>",t.messageBox=e(r),e("body").append(t.messageBox),t.messageBox.close=function(){t._removeWindowMask(),t.messageBox.remove()},n.width&&t.messageBox.width(n.width),n.title&&e(".l-messagebox-title-inner",t.messageBox).html(n.title),n.content&&e(".l-messagebox-content",t.messageBox).html(n.content),n.buttons&&(e(n.buttons).each(function(n,r){var i=e('<div class="l-messagebox-btn"><div class="l-messagebox-btn-l"></div><div class="l-messagebox-btn-r"></div><div class="l-messagebox-btn-inner"></div></div>');e(".l-messagebox-btn-inner",i).html(r.text),e(".l-messagebox-buttons-inner",t.messageBox).append(i),r.width&&i.width(r.width),r.onclick&&i.click(function(){r.onclick(r,n,t.messageBox)})}),e(".l-messagebox-buttons-inner",t.messageBox).append("<div class='l-clear'></div>"));var i=t.messageBox.width(),s=0;e(".l-messagebox-buttons-inner .l-messagebox-btn",t.messageBox).each(function(){s+=e(this).width()}),e(".l-messagebox-buttons-inner",t.messageBox).css({marginLeft:parseInt((i-s)*.5)}),t._applyWindowMask(),t._applyDrag(),t._setImage();var o=0,u=0,a=n.width||t.messageBox.width();n.left!=null?o=n.left:n.left=o=.5*(e(window).width()-a),n.top!=null?u=n.top:n.top=u=.5*(e(window).height()-t.messageBox.height())+e(window).scrollTop()-10,o<0&&(n.left=o=0),u<0&&(n.top=u=0),t.messageBox.css({left:o,top:u}),e(".l-messagebox-btn",t.messageBox).hover(function(){e(this).addClass("l-messagebox-btn-over")},function(){e(this).removeClass("l-messagebox-btn-over")}),e(".l-messagebox-close",t.messageBox).hover(function(){e(this).addClass("l-messagebox-close-over")},function(){e(this).removeClass("l-messagebox-close-over")}).click(function(){t.messageBox.close()}),t.set(n)},close:function(){var e=this,t=this.options;this.g._removeWindowMask(),this.messageBox.remove()},_applyWindowMask:function(){var t=this,n=this.options;e(".l-window-mask").remove(),e("<div class='l-window-mask' style='display: block;'></div>").appendTo(e("body"))},_removeWindowMask:function(){var t=this,n=this.options;e(".l-window-mask").remove()},_applyDrag:function(){var t=this,n=this.options;n.isDrag&&e.fn.ligerDrag&&t.messageBox.ligerDrag({handler:".l-messagebox-title-inner",animate:!1})},_setImage:function(){var t=this,n=this.options;n.type&&(n.type=="success"||n.type=="donne"?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-donne").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):n.type=="error"?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-error").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):n.type=="warn"?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-warn").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):n.type=="question"&&(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-question").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:40})))}}),e.ligerMessageBox.show=function(t){return e.ligerMessageBox(t)},e.ligerMessageBox.alert=function(t,n,r,i){t=t||"",n=n||t;var s=function(e,t,n){n.close(),i&&i(e,t,n)};return p={title:t,content:n,buttons:[{text:"确定",onclick:s}]},r&&(p.type=r),e.ligerMessageBox(p)},e.ligerMessageBox.confirm=function(t,n,r){var i=function(e,t,n){n.close(),r&&r(t==0)};return p={type:"question",title:t,content:n,buttons:[{text:"是",onclick:i},{text:"否",onclick:i}]},e.ligerMessageBox(p)},e.ligerMessageBox.success=function(t,n,r){return e.ligerMessageBox.alert(t,n,"success",r)},e.ligerMessageBox.error=function(t,n,r){return e.ligerMessageBox.alert(t,n,"error",r)},e.ligerMessageBox.warn=function(t,n,r){return e.ligerMessageBox.alert(t,n,"warn",r)},e.ligerMessageBox.question=function(t,n){return e.ligerMessageBox.alert(t,n,"question")}})(jQuery)