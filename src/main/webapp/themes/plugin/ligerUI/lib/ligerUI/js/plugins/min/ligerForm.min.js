(function(e){e.fn.ligerForm=function(){return e.ligerui.run.call(this,"ligerForm",arguments)},e.ligerDefaults=e.ligerDefaults||{},e.ligerDefaults.Form={inputWidth:180,labelWidth:90,space:40,rightToken:"：",labelAlign:"left",align:"left",fields:[],appendID:!0,prefixID:"",toJSON:e.ligerui.toJSON},e.ligerDefaults.Form.editorBulider=function(e){var t=this,n=this.options,r={};n.inputWidth&&(r.width=n.inputWidth),e.attr("inputWidth")&&(r.width=e.attr("inputWidth"));if(!(!e.attr("isLigerui")||e.attr("isLigerui")!="false"&&e.attr("isLigerui")!="1"))return!1;if(e.is("select"))e.ligerComboBox(r);else if(e.is(":text")||e.is(":password")){var i=e.attr("ltype");switch(i){case"select":case"combobox":e.ligerComboBox(r);break;case"spinner":e.ligerSpinner(r);break;case"date":e.ligerDateEditor(r);break;case"float":case"number":r.number=!0,e.ligerTextBox(r);break;case"int":case"digits":r.digits=!0;default:e.ligerTextBox(r)}}else e.is(":radio")?e.ligerRadio(r):e.is(":checkbox")?e.ligerCheckBox(r):e.is("textarea")&&e.addClass("l-textarea")},e.ligerui.controls.Form=function(t,n){e.ligerui.controls.Form.base.constructor.call(this,t,n)},e.ligerui.controls.Form.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Form"},__idPrev:function(){return"Form"},_init:function(){e.ligerui.controls.Form.base._init.call(this)},_render:function(){var t=this,n=this.options,r=e(this.element);if(n.fields&&n.fields.length){r.hasClass("l-form")||r.addClass("l-form");var i=[],s=!1;e(n.fields).each(function(e,n){var r=n.name||n.id;if(!r)return;if(n.type=="hidden"){i.push('<input type="hidden" id="'+r+'" name="'+r+'" />');return}var o=n.renderToNewLine||n.newline;o==null&&(o=!0),n.merge&&(o=!1),n.group&&(o=!0),o&&(s&&(i.push("</ul>"),s=!1),n.group&&(i.push('<div class="l-group'),n.groupicon&&i.push(" l-group-hasicon"),i.push('">'),n.groupicon&&i.push('<img src="'+n.groupicon+'" />'),i.push("<span>"+n.group+"</span></div>")),i.push("<ul>"),s=!0),i.push(t._buliderLabelContainer(n)),i.push(t._buliderControlContainer(n)),i.push(t._buliderSpaceContainer(n))}),s&&(i.push("</ul>"),s=!1),r.append(i.join(""))}e("input,select,textarea",r).each(function(){n.editorBulider.call(t,e(this))})},_buliderLabelContainer:function(e){var t=this,n=this.options,r=e.label||e.display,i=e.labelWidth||e.labelwidth||n.labelWidth,s=e.labelAlign||n.labelAlign;r&&(r+=n.rightToken);var o=[];return o.push('<li style="'),i&&o.push("width:"+i+"px;"),s&&o.push("text-align:"+s+";"),o.push('">'),r&&o.push(r),o.push("</li>"),o.join("")},_buliderControlContainer:function(e){var t=this,n=this.options,r=e.width||n.inputWidth,i=e.align||e.textAlign||e.textalign||n.align,s=[];return s.push('<li style="'),r&&s.push("width:"+r+"px;"),i&&s.push("text-align:"+i+";"),s.push('">'),s.push(t._buliderControl(e)),s.push("</li>"),s.join("")},_buliderSpaceContainer:function(e){var t=this,n=this.options,r=e.space||e.spaceWidth||n.space,i=[];return i.push('<li style="'),r&&i.push("width:"+r+"px;"),i.push('">'),i.push("</li>"),i.join("")},_buliderControl:function(t){var n=this,r=this.options,i=t.width||r.inputWidth,s=t.name||t.id,o=[];t.comboboxName&&t.type=="select"&&o.push('<input type="hidden" id="'+r.prefixID+s+'" name="'+s+'" />'),t.textarea||t.type=="textarea"?o.push("<textarea "):t.type=="checkbox"?o.push('<input type="checkbox" '):t.type=="radio"?o.push('<input type="radio" '):t.type=="password"?o.push('<input type="password" '):o.push('<input type="text" '),t.cssClass&&o.push('class="'+t.cssClass+'" '),t.type&&o.push('ltype="'+t.type+'" ');if(t.attr)for(var u in t.attr)o.push(u+'="'+t.attr[u]+'" ');t.comboboxName&&t.type=="select"?(o.push('name="'+t.comboboxName+'"'),r.appendID&&o.push(' id="'+r.prefixID+t.comboboxName+'" ')):(o.push('name="'+s+'"'),r.appendID&&o.push(' id="'+s+'" '));var a=e.extend({width:i-2},t.options||{});return o.push(" ligerui='"+r.toJSON(a)+"' "),t.validate&&o.push(" validate='"+r.toJSON(t.validate)+"' "),o.push(" />"),o.join("")}})})(jQuery)