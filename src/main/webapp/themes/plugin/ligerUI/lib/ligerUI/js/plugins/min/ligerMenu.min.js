(function(e){e.ligerMenu=function(t){return e.ligerui.run.call(null,"ligerMenu",arguments)},e.ligerDefaults.Menu={width:120,top:0,left:0,items:null,shadow:!0},e.ligerMethos.Menu={},e.ligerui.controls.Menu=function(t){e.ligerui.controls.Menu.base.constructor.call(this,null,t)},e.ligerui.controls.Menu.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return e.ligerMethos.Menu},_render:function(){var t=this,n=this.options;t.menuItemCount=0,t.menus={},t.menu=t.createMenu(),t.element=t.menu[0],t.menu.css({top:n.top,left:n.left,width:n.width}),n.items&&e(n.items).each(function(e,n){t.addItem(n)}),e(document).bind("click.menu",function(){for(var e in t.menus){var n=t.menus[e];if(!n)return;n.hide(),n.shadow&&n.shadow.hide()}}),t.set(n)},show:function(e,t){var n=this,r=this.options;t==undefined&&(t=n.menu),e&&e.left!=undefined&&t.css({left:e.left}),e&&e.top!=undefined&&t.css({top:e.top}),t.show(),n.updateShadow(t)},updateShadow:function(e){var t=this,n=this.options;if(!n.shadow)return;e.shadow.css({left:e.css("left"),top:e.css("top"),width:e.outerWidth(),height:e.outerHeight()}),e.is(":visible")?e.shadow.show():e.shadow.hide()},hide:function(e){var t=this,n=this.options;e==undefined&&(e=t.menu),t.hideAllSubMenu(e),e.hide(),t.updateShadow(e)},toggle:function(){var e=this,t=this.options;e.menu.toggle(),e.updateShadow(e.menu)},removeItem:function(t){var n=this,r=this.options;e("> .l-menu-item[menuitemid="+t+"]",n.menu.items).remove()},setEnabled:function(t){var n=this,r=this.options;e("> .l-menu-item[menuitemid="+t+"]",n.menu.items).removeClass("l-menu-item-disable")},setDisabled:function(t){var n=this,r=this.options;e("> .l-menu-item[menuitemid="+t+"]",n.menu.items).addClass("l-menu-item-disable")},isEnable:function(t){var n=this,r=this.options;return!e("> .l-menu-item[menuitemid="+t+"]",n.menu.items).hasClass("l-menu-item-disable")},getItemCount:function(){var t=this,n=this.options;return e("> .l-menu-item",t.menu.items).length},addItem:function(t,n){var r=this,i=this.options;if(!t)return;n==undefined&&(n=r.menu);if(t.line){n.items.append('<div class="l-menu-item-line"></div>');return}var s=e('<div class="l-menu-item"><div class="l-menu-item-text"></div> </div>'),o=e("> .l-menu-item",n.items).length;n.items.append(s),s.attr("ligeruimenutemid",++r.menuItemCount),t.id&&s.attr("menuitemid",t.id),t.text&&e(">.l-menu-item-text:first",s).html(t.text),t.icon&&s.prepend('<div class="l-menu-item-icon l-icon-'+t.icon+'"></div>'),(t.disable||t.disabled)&&s.addClass("l-menu-item-disable");if(t.children){s.append('<div class="l-menu-item-arrow"></div>');var u=r.createMenu(s.attr("ligeruimenutemid"));r.menus[s.attr("ligeruimenutemid")]=u,u.width(i.width),u.hover(null,function(){u.showedSubMenu||r.hide(u)}),e(t.children).each(function(){r.addItem(this,u)})}t.click&&s.click(function(){if(e(this).hasClass("l-menu-item-disable"))return;t.click(t,o)}),t.dblclick&&s.dblclick(function(){if(e(this).hasClass("l-menu-item-disable"))return;t.dblclick(t,o)});var a=e("> .l-menu-over:first",n);s.hover(function(){if(e(this).hasClass("l-menu-item-disable"))return;var i=e(this).offset().top,s=i-n.offset().top;a.css({top:s}),r.hideAllSubMenu(n);if(t.children){var o=e(this).attr("ligeruimenutemid");if(!o)return;r.menus[o]&&(r.show({top:i,left:e(this).offset().left+e(this).width()-5},r.menus[o]),n.showedSubMenu=!0)}},function(){if(e(this).hasClass("l-menu-item-disable"))return;var n=e(this).attr("ligeruimenutemid");if(t.children){var n=e(this).attr("ligeruimenutemid");if(!n)return}})},hideAllSubMenu:function(t){var n=this,r=this.options;t==undefined&&(t=n.menu),e("> .l-menu-item",t.items).each(function(){if(e("> .l-menu-item-arrow",this).length>0){var t=e(this).attr("ligeruimenutemid");if(!t)return;n.menus[t]&&n.hide(n.menus[t])}}),t.showedSubMenu=!1},createMenu:function(t){var n=this,r=this.options,i=e('<div class="l-menu" style="display:none"><div class="l-menu-yline"></div><div class="l-menu-over"><div class="l-menu-over-l"></div> <div class="l-menu-over-r"></div></div><div class="l-menu-inner"></div></div>');return t&&i.attr("ligeruiparentmenuitemid",t),i.items=e("> .l-menu-inner:first",i),i.appendTo("body"),r.shadow&&(i.shadow=e('<div class="l-menu-shadow"></div>').insertAfter(i),n.updateShadow(i)),i.hover(null,function(){i.showedSubMenu||e("> .l-menu-over:first",i).css({top:-24})}),t?n.menus[t]=i:n.menus[0]=i,i}}),e.ligerui.controls.Menu.prototype.setEnable=e.ligerui.controls.Menu.prototype.setEnabled,e.ligerui.controls.Menu.prototype.setDisable=e.ligerui.controls.Menu.prototype.setDisabled})(jQuery)