(function(e){e.fn.ligerTextBox=function(){return e.ligerui.run.call(this,"ligerTextBox",arguments)},e.fn.ligerGetTextBoxManager=function(){return e.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)},e.ligerDefaults.TextBox={onChangeValue:null,width:null,disabled:!1,value:null,nullText:null,digits:!1,number:!1},e.ligerui.controls.TextBox=function(t,n){e.ligerui.controls.TextBox.base.constructor.call(this,t,n)},e.ligerui.controls.TextBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){e.ligerui.controls.TextBox.base._init.call(this);var t=this,n=this.options;n.width||(n.width=e(t.element).width()),e(this.element).attr("readonly")&&(n.disabled=!0)},_render:function(){var t=this,n=this.options;t.inputText=e(this.element),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.inputText.hasClass("l-text-field")||t.inputText.addClass("l-text-field"),this._setEvent(),t.set(n),t.checkValue()},_getValue:function(){return this.inputText.val()},_setNullText:function(){this.checkNotNull()},checkValue:function(){var e=this,t=this.options,n=e.inputText.val();if(t.number&&!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(n)||t.digits&&!/^\d+$/.test(n)){e.inputText.val(e.value||0);return}e.value=n},checkNotNull:function(){var e=this,t=this.options;t.nullText&&!t.disabled&&(e.inputText.val()||e.inputText.addClass("l-text-field-null").val(t.nullText))},_setEvent:function(){var t=this,n=this.options;t.inputText.bind("blur.textBox",function(){t.trigger("blur"),t.checkNotNull(),t.checkValue(),t.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){t.trigger("focus"),n.nullText&&e(this).hasClass("l-text-field-null")&&e(this).removeClass("l-text-field-null").val(""),t.wrapper.addClass("l-text-focus")}).change(function(){t.trigger("changeValue",[this.value])}),t.wrapper.hover(function(){t.trigger("mouseOver"),t.wrapper.addClass("l-text-over")},function(){t.trigger("mouseOut"),t.wrapper.removeClass("l-text-over")})},_setDisabled:function(e){e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("l-text-disabled")):(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("l-text-disabled"))},_setWidth:function(e){e>20&&(this.wrapper.css({width:e}),this.inputText.css({width:e-4}))},_setHeight:function(e){e>10&&(this.wrapper.height(e),this.inputText.height(e-2))},_setValue:function(e){e!=null&&this.inputText.val(e)},_setLabel:function(t){var n=this,r=this.options;if(!n.labelwrapper){n.labelwrapper=n.wrapper.wrap('<div class="l-labeltext"></div>').parent();var i=e('<div class="l-text-label" style="float:left;">'+t+":&nbsp</div>");n.labelwrapper.prepend(i),n.wrapper.css("float","left"),r.labelWidth?n._setLabelWidth(r.labelWidth):r.labelWidth=i.width(),i.height(n.wrapper.height()),r.labelAlign&&n._setLabelAlign(r.labelAlign),n.labelwrapper.append('<br style="clear:both;" />'),n.labelwrapper.width(r.labelWidth+r.width+2)}else n.labelwrapper.find(".l-text-label").html(t+":&nbsp")},_setLabelWidth:function(e){var t=this,n=this.options;if(!t.labelwrapper)return;t.labelwrapper.find(".l-text-label").width(e)},_setLabelAlign:function(e){var t=this,n=this.options;if(!t.labelwrapper)return;t.labelwrapper.find(".l-text-label").css("text-align",e)},updateStyle:function(){var e=this,t=this.options;e.inputText.attr("disabled")||e.inputText.attr("readonly")?(e.wrapper.addClass("l-text-disabled"),e.options.disabled=!0):(e.wrapper.removeClass("l-text-disabled"),e.options.disabled=!1),e.inputText.hasClass("l-text-field-null")&&e.inputText.val()!=t.nullText&&e.inputText.removeClass("l-text-field-null"),e.checkValue()}})})(jQuery)