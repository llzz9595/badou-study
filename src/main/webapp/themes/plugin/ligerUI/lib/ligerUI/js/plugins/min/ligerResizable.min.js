(function(e){e.fn.ligerResizable=function(t){return e.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetResizableManager=function(){return e.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},e.ligerui.controls.Resizable=function(t){e.ligerui.controls.Resizable.base.constructor.call(this,null,t)},e.ligerui.controls.Resizable.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,n=this.options;t.target=e(n.target),t.set(n),t.target.mousemove(function(r){if(n.disabled)return;t.dir=t._getDir(r),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default");if(n.target.ligeruidragid){var i=e.ligerui.get(n.target.ligeruidragid);i&&t.dir?i.set("disabled",!0):i&&i.set("disabled",!1)}}).mousedown(function(e){if(n.disabled)return;t.dir&&t._start(e)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(t){var n=this,r=this.options,i="",s=n.target.offset(),o=n.target.width(),u=n.target.height(),a=r.scope,f=t.pageX||t.screenX,l=t.pageY||t.screenY;return l>=s.top&&l<s.top+a?i+="n":l<=s.top+u&&l>s.top+u-a&&(i+="s"),f>=s.left&&f<s.left+a?i+="w":f<=s.left+o&&f>s.left+o-a&&(i+="e"),r.handles=="all"||i==""?i:e.inArray(i,n.handles)!=-1?i:""},_setHandles:function(e){if(!e)return;this.handles=e.replace(/(\s*)/g,"").split(",")},_createProxy:function(){var t=this;t.proxy=e('<div class="l-resizable"></div>'),t.proxy.width(t.target.width()).height(t.target.height()),t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)},_start:function(t){var n=this,r=this.options;n._createProxy(),n.proxy.css({left:n.target.offset().left,top:n.target.offset().top,position:"absolute"}),n.current={dir:n.dir,left:n.target.offset().left,top:n.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:n.target.width(),height:n.target.height()},e(document).bind("selectstart.resizable",function(){return!1}),e(document).bind("mouseup.resizable",function(){n._stop.apply(n,arguments)}),e(document).bind("mousemove.resizable",function(){n._drag.apply(n,arguments)}),n.proxy.show(),n.trigger("startResize",[n.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this,n=this.options;if(!t.current)return;if(!t.proxy)return;t.proxy.css("cursor",t.current.dir==""?"default":t.current.dir+"-resize");var r=e.pageX||e.screenX,i=e.pageY||e.screenY;t.current.diffX=r-t.current.startX,t.current.diffY=i-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])},_stop:function(t){var n=this,r=this.options;n.hasBind("stopResize")?n.trigger("stopResize",[n.current,t])!=0&&n._applyResize():n._applyResize(),n._removeProxy(),n.trigger("endResize",[n.current,t]),e(document).unbind("selectstart.resizable"),e(document).unbind("mousemove.resizable"),e(document).unbind("mouseup.resizable")},_applyResize:function(t){var n=this,r=this.options,i={left:n.current.left,top:n.current.top,width:n.current.width,height:n.current.height},s=!1;t||(t=n.target,s=!0,isNaN(parseInt(n.target.css("top")))?i.top=0:i.top=parseInt(n.target.css("top")),isNaN(parseInt(n.target.css("left")))?i.left=0:i.left=parseInt(n.target.css("left"))),e.inArray(n.current.dir,n.changeBy.l)>-1?(i.left+=n.current.diffX,n.current.diffLeft=n.current.diffX):s&&delete i.left,e.inArray(n.current.dir,n.changeBy.t)>-1?(i.top+=n.current.diffY,n.current.diffTop=n.current.diffY):s&&delete i.top,e.inArray(n.current.dir,n.changeBy.w)>-1?(i.width+=(n.current.dir.indexOf("w")==-1?1:-1)*n.current.diffX,n.current.newWidth=i.width):s&&delete i.width,e.inArray(n.current.dir,n.changeBy.h)>-1?(i.height+=(n.current.dir.indexOf("n")==-1?1:-1)*n.current.diffY,n.current.newHeight=i.height):s&&delete i.height,s&&r.animate?t.animate(i):t.css(i)}})})(jQuery)